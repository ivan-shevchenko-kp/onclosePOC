<!DOCTYPE html>
<html>
<head>
	<title>My Page</title>
	<script>
		window.onbeforeunload = function() {
			if (true || document.forms[0].checkDirty && document.forms[0].checkDirty()) {
				return "You have unsaved changes on this page. Are you sure you want to leave?";
			}
		};

		function markDirty() {
			document.forms[0].dirty = true;
		}

		function clearDirty() {
			document.forms[0].dirty = false;
		}

		function setupDirtyChecking() {
			var form = document.forms[0];
			form.dirty = false;
			form.checkDirty = function() {
				if (this.dirty) {
					return true;
				} else {
					return false;
				}
			};
			form.addEventListener('change', markDirty);
			form.addEventListener('submit', clearDirty);
		}
	</script>
</head>
<body onload="setupDirtyChecking();">
	<h1>My Page</h1>
	<form>
		<p>
			<label for="name">Name:</label>
			<input type="text" id="name" name="name">
		</p>
		<p>
			<label for="email">Email:</label>
			<input type="email" id="email" name="email">
		</p>
		<p>
			<input type="submit" value="Save">
		</p>
	</form>
</body>
</html>